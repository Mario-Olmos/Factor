<div class="container">
  <h2>Subir un nuevo artículo</h2>
  <form (ngSubmit)="onSubmit()" [formGroup]="articleForm" enctype="multipart/form-data">

    <!-- Título -->
    <div class="form-group">
      <label for="title">Título</label>
      <input type="text" id="title" formControlName="title" class="form-control" placeholder="Título del artículo"
        required />
      <div *ngIf="articleForm.get('title')?.invalid && articleForm.get('title')?.touched">
        <small class="text-danger">El título es requerido.</small>
      </div>
    </div>

    <!-- Descripción -->
    <div class="form-group">
      <label for="description">Descripción</label>
      <textarea id="description" formControlName="description" class="form-control"
        placeholder="Descripción del artículo" rows="4"></textarea>
    </div>

    <!-- Tema -->
    <div>
      <label for="theme">Temática</label>
      <select id="theme" formControlName="theme">
        <option value="" disabled selected>Seleccione una temática</option>
        <!-- Primer nivel: Temática principal -->
        <ng-container *ngFor="let theme of themes">
          <option [disabled]="true" style="font-weight: bold; font-size: 1.1rem;">{{ theme.name }}</option>

          <!-- Segundo nivel: Subtemas del primer nivel -->
          <ng-container *ngFor="let subtheme of theme.subthemes">
            <option [disabled]="true" style="margin-left: 10px; font-size: 1rem; font-weight: 500;">
              -- {{ subtheme.name }}
            </option>

            <!-- Tercer nivel: Subtemas del segundo nivel -->
            <ng-container *ngFor="let subSubtheme of subtheme.subthemes">
              <option [value]="subSubtheme._id" style="margin-left: 20px; font-size: 0.9rem;">
                ---- {{ subSubtheme.name }}
              </option>
            </ng-container>
          </ng-container>
        </ng-container>
      </select>
    </div>

    <!-- PDF -->
    <div class="form-group">
      <label for="pdf">Subir PDF</label>
      <input type="file" id="pdf" (change)="onFileChange($event)" class="form-control" accept="application/pdf"
        required />
      <div *ngIf="pdfError">
        <small class="text-danger">Por favor, selecciona un archivo PDF válido.</small>
      </div>
    </div>

    <!-- Vista previa del archivo seleccionado -->
    <div *ngIf="pdfFileName">
      <p><strong>Archivo seleccionado:</strong> {{ pdfFileName }}</p>
    </div>

    <!-- Botón de envío -->
    <button type="submit" class="btn btn-primary" [disabled]="articleForm.invalid || !pdfFile">
      Subir Artículo
    </button>

  </form>
</div>